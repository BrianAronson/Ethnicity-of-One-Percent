Data SCFTemp;
	*Set SCF.Combined; *1995-2007;
	Set SCF.Combined2; *1988-2007;
	*Education;
		if educ<12 then EducBelowHS=1;
		else EducBelowHS=0;
		if educ<12 then Education=0;
		else if educ<13 then Education=1;
		else if educ<16 then Education=2;
		else if educ<17 then Education=3;
		else if educ=17 then Education=4;
		if Education=0 then LessThanHS=1;
			else if Education~=0 & Education~=. then LessThanHS=0;
		if Education=1 then HSGraduate=1;
			else if Education~=1 & Education~=. then HSGraduate=0;
		if Education=2 then SomeCollege=1;
			else if Education~=2 & Education~=. then SomeCollege=0;
		if Education=3 then Bachelors=1;
			else if Education~=3 & Education~=. then Bachelors=0;
		if Education=4 then AdvancedDegree=1;
			else if Education~=4 & Education~=. then AdvancedDegree=0;

	*Race;
		if race=1 then White=1;
		else White=0;
		if race=2 then Black=1;
		else Black=0;
		if race=3 then Latino=1;
		else Latino=0;
		if race=5 then Other=1;
		else Other=0;
	*Age;
		if age>24 & age<65 then Age25to64=1;
		Else Age25to64=0;
	*Married;
		if Married=2 then Married=0;
	*Children;
		if kids<5 then Children=kids;
		else Children=5;
	*Wealth Variables;
		Assets=Networth+Debt;
	*Home and Mortgage;
		HomeEquity=homeeq;
		HomeDebt=NH_MORT;
		if homeeq~=0 then HomeOwner=1;
		else if homeeq=. | homeeq=0 then Homeowner=0;
		if housecl~=2 then HomeOwner1=1;
		else Homeowner1=0;
		if HomeOwner=1 & PAYMORT1=0 then Mortgages=0;
			else if Homeowner=1 & PAYMORT1>0 & PAYMORT2>0 & PAYMORT3>0 then Mortgages=3 ;
			else if Homeowner=1 & PAYMORT1>0 & PAYMORT2>0 & PAYMORT3=0 then Mortgages=2 ;
			else if Homeowner=1 & PAYMORT1>0 & PAYMORT2=0 & PAYMORT3=0 then Mortgages=1 ;
			else Mortgages=0; *This is redundant.  Models on mortgages should exclude non-home owners.
	*Liquid Asset Rates of Ownership; 
		if hstocks=1 | deq>0 then StockMutual=1;
		else StockMutual=0;
		if mma>0 then InterestBank=1;
		else InterestBank=0;
		if nochk=0 then Checking1=1;
		else Checking1=0;
		If irakh>0 then IRAor401k=1;
		Else  IRAor401k=0;
	*New Variables to be matched;
		Unemployed = 1 - lf;
		CheckingValue = checking;
		SavingsPlanValue = thrift;
		StockValue = deq;
		IraValue = irakh;
		LifeInsuranceValue = cashli;
		VehicleValue = vehic;
		OwnCar = own;
		NumberCarOwned = nown;
		if NumberCarOwned>5 then NumberCarOwned=5;
		HomeOwner = hhouses;
		OtherRealEstateValue = nnresre;
		BusinessValue = bus;
		OtherAssetValue = othnfin;
		SecuredDebtValue = mrthel;
		HomeDebt = NH_MORT;
		HouseValue = homeeq;
		CreditCardDebtValue = ccbal;
		CarDebt = VEH_INST;
		refperson = 1;
*Year Dummies;
	if year=1995 then year1996=1;
		else year1996=0;
	if year=2001 then year2001=1;
		else year2001=0;
	if year=2004 then year2004=1;
		else year2004=0;
*	if year=2007 then delete;
*logged variables;
	Array SkewedVariable (17) income networth debt assets homeequity CheckingValue SavingsPlanValue StockValue IraValue LifeInsuranceValue OtherRealEstateValue BusinessValue OtherAssetValue SecuredDebtValue HomeDebt CreditCardDebtValue CarDebt;
	Array LoggedVariable (17) loggedincome loggednetworth loggeddebt loggedassets loggedhomeequity loggedCheckingValue loggedSavingsPlanValue loggedStockValue loggedIraValue loggedLifeInsuranceValue loggedOtherRealEstateValue loggedBusinessValue loggedOtherAssetValue loggedSecuredDebtValue loggedHomeDebt loggedCreditCardDebtValue loggedCarDebt;
	Do i = 1 to 16;
		if SkewedVariable(i)>0 then LoggedVariable(i)=log10(SkewedVariable(i));  *This without if statement would produce an error and missing number for those with negative and 0 networth.;
		if SkewedVariable(i)<0 then LoggedVariable(i)=-log10(ABS(SkewedVariable(i))); *This gives me negative logged networth;
		if SkewedVariable(i)=0 then LoggedVariable(i)=0; *This is not actually true, but log of 1=0, and 0 is pretty close to 1...;
	END;
SIPP=0;
Female=hhsex-1;
run;

*data SCF.SCFTemp;
*	merge SCFtemp Networth50 Networth90 Networth95 Networth99;
*	by year;
*run;
